---
title: "Education: Racket制御構文の基礎: if式とbegin式"
emoji: "🎾"
type: "idea"
topics: ["学習", "Racket", "制御構文", "if式", "begin式" ]
published: false
---

## はじめに

本記事では、Racket 言語における基礎的な制御構文である`if`について説明します。
Racket では、`if文`も式の 1つである`if式`として評価されます。すなわち、`if式`は何らかの値を返す必要があります。

また、複数の式を 1つにまとめる式である`begin式`についても説明します。
先ほどあげた`if式`は、真の場合も偽の場合も 1つの式(=1つの処理)しか評価できません。
`begin式`を使うことで、複数の式を取り扱えるようになります。

## Racketとは

Racket は、Scheme 方言をベースにした関数型言語です。Scheme と同様に強力なマクロシステムがあり、学術分野での研究開発にも利用されています。また、"DrRacket"という独自の開発ツールがあるため、手軽に始められることが魅力のひとつです。

### Racketの特徴

- 関数型プログラミングをベースにした文法
- 型の自動検出による開発スキルの向上
- 強力なマクロ言語による柔軟なコード変換
- 多彩なライブラリの提供
- 拡張性に優れたツールと環境

## if式

if 式は、条件分岐を行なうための制御構文です。
まず`<述語>`[^1]を評価します。結果が真(`#t`)なら`<真の場合の式>`を評価します。偽(`#f`)の場合は、`<偽の場合の式>`を評価します。
if 式では、`<述語>`の真偽により`<真の場合の式>`か`<偽の場合の式>`のどちらかを評価します。両方を評価することは、ありません。
また、Racket では`<偽の場合の式>`を省略することはできません。何らかの式を含める必要があります。

if 式の構文は以下の通りです。

``` Racket
(if
  <述語>    ; 真偽を判断する式
    <真の場合の式>  ; 述語の評価結果が真(`#t`)だった場合に評価される式
    <偽の場合の式>  ; 述語の評価結果が偽(`#f`)だった場合に評価される式
)
```

**重要事項**

- Racket では、真偽値を返す関数を`<述語>`と呼びます。複数の`<述語>`があった場合はさいごに評価した結果を返します
- Racket の if 式は、`<述語>`の結果により`[真の場合の処理]`か`[偽の場合の処理]`のどちらかを評価します。両方を評価することはありません
- Racket の if 式では、**条件の結果が偽(`#f`)の場合に必ず何かを返す必要がある点**に注意しましょう。もし何も返せない場合は、`void`を返すべきです

以下のサンプルコードでは、if 式を使い、x が y よりも大きい場合に「x は y よりも大きい」と出力し、そうでない場合には「x は y よりも小さい」と出力しています。

``` Racket
(define x 5)
(define y 3)

(if (> x y)
  (display "xはyよりも大きい")
  (display "xはyよりも小さい"))

```

となります。

[^1]: 述語: if 式などで使う、真偽値を返す式。複数の式の場合は、さいごに評価した式の結果をル買う。

### if式の特殊な使い方

`if式`では、次のような特殊な用法も使えます。

``` Racket
(define x 2)
(define y 3)

((if #f * /) x y)

```

上記の場合、`(if #f * /)`の結果は、`/`となります。結果、'(/ x y)`を評価することになり、商である`2/3'が返ります。

## begin式

`begin式`は、複数の式をひとまとめにします。まとめられた式は、先頭から順番に評価され、最後に評価した式の結果が、beginn 式を評価した結果となります。

構文は、以下のとおりです

``` Racket
(begin
  (<式1>)
  (<式2>)
   ...
   (<式n>)
  )
```

以下のサンプルコードでは、メッセージを表示する式と改行をする式の 2つを 1つの式にまとめています。

``` Racket
(define x 3)
(define y 5)
(if (> x y)
  (begin
    (display "xはyよりも大きい")
    (display "\n")  ;  改行
    )
  (begin
    (display "xはyよりも小さい")
    (display "\n")  ;  改行
    ))

```

となります。

## さいごに

以上で、Racket の if 式と begin ブロックについて説明しました。これらの制御構文は、プログラムの制御フローをうまく制御するために欠かせないものです。
Racket プログラミングの技術的な理解の向上に役立ててください。

それでは、Happy Hacking!

## 参考資料

### 本

- [Racket Programming the Fun Way](https://www.amazon.co.jp/dp/1718500823)
- [How to Design Programs](https://www.amazon.co.jp/dp/0262534800/)

### Webサイト

- [Racket Documentation](https://docs.racket-lang.org/)
- [第4章 条件分岐 if 文](https://sites.google.com/site/atponslisp/home/scheme/racket/schemenyuumon-1/schemenyuumon/dai-4shou--jouken-bunki--if-bun)
- [第3回講義レジュメ - 愛媛大学 講義資料 プログラミング言語(Scheme)](http://aiweb.cs.ehime-u.ac.jp/~ninomiya/archive/scheme/itp-3.pdf)
