---
title: "Education: Racket制御構文の基礎: cond式"
emoji: "🎾"
type: "idea"
topics: ["学習", "Racket", "制御構文", "cond式", "特殊形式" ]
published: false
---

## はじめに

本記事では、Racket の制御構文の 1つである`cond式`[^1]について説明します。
`cond式`は複数の条件をあつかう特殊形式[^2]で、Racket で複雑な条件分岐を実現するために使用できます。
本記事では、`cond式`の基礎的な使い方について説明します。

[^1]: cond 式: Racket 言語において`cond`で始まる式。複数の条件分岐に使用する
[^2]: 特殊形式: `if`、`cond`のように Racket の一般的な式と評価の方法が異なる式

## 制御構文

### cond式

`cond式`は複数の条件をまとめて扱う特殊形式です。`if式`では、`<述語>`[^3]の真偽の 2種類の式を評価しましたが`cond式`は、複数の`<述語>`を並べて先頭から順番に評価します。
ある`<述語>`の評価が真の場合は、対応する`<式>`を評価してその結果を返します。
それ以降の`<述語>`の評価は行いません。
もし評価が真となる`<述語>`がないばあいは、`void`を返します。
また、`<述語>`に対応する`<式>がない場合は、`<述語>`の評価、すなわち真(`#t')を返します。

`cond式`の構文は、以下のとおりです。

``` Racket : cond式
(cond
  [(<述語1>) (<式1>)]
  [(<述語2>) (<式2>)]
   .
   .
   .
  [(<述語n) (<式n>)]
  [else     (<else式>)]

```

以下のサンプルコードは、`cond`を使って曜日の短縮形から日本語の曜日を取得する方法を示しています。

``` Racket
#lang racket

(define (japanese-week day)
  (cond
    [(eqv? day "Mon") "月曜日"]
    [(eqv? day "Tue") "火曜日"]
    [(eqv? day "Wed") "水曜日"]
    [(eqv? day "Thu") "木曜日"]
    [(eqv? day "Fri") "金曜日"]
    [(eqv? day "Sat") "土曜日"]
    [(eqv? day "Sun") "日曜日"]

```

[^3]: 述語: if,cond などの条件分岐において、条件を表す式。真(`#t`)、偽(`#f`)のいずれかの値を返す

### else

`else`は`cond式`の最後にかける特殊記号です。`else`ではじまる`else節`は**それ以外**という条件を示し、
`else節`の式の部分`<else式>`を評価します。

言い換えると、条件に当てはまる`<述語>`がなかった場合は`<else式>`の結果を返します。

以下の、サンプルコードは曜日の短縮形から休日と平日を判断しています。

``` Racket: weekend.rkt

#lang racket

(define (weekend day)
  (cond
    [(eqv? day "Sat") "休日"]
    [(eqv? day "Sun") "休日"]
    [else "平日"]

```

### cond式のまとめ

`cond式`についてまとめます。
特徴を理解して、今後の Racket プログラムについて役立ててください。

- `cond`は複数の条件式のうち、評価が真となった場合の`<式>`の評価を返す
- 評価が真となる条件がなかった場合は、'void'を返す
- 最後に`else`がある場合は、`void`ではなく`else節`の`<else式>`の評価を返す
- `else`は`<述語>`の最後になくてはならない。`else`の後に`<述語>`が続くとエラーとなる

## さいごに

Racket の cond 式を使用することで、複雑な条件分岐を実現できます。以上の例を参考にして、Racket のプログラムで cond 式を使用して条件分岐を実現する方法を学習してください。

## 参考資料

### 本

- [Racket Programming the Fun Way](https://www.amazon.co.jp/dp/1718500823)
- [How to Design Programs](https://www.amazon.co.jp/dp/0262534800/)
