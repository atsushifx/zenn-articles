---
title: "Education: Racket制御構文: cond式の基礎"
emoji: "🎾"
type: "idea"
topics: ["学習", "Racket", "制御構文", "cond式", "特殊形式" ]
published: false
---

## はじめに

本記事では、Racket の制御構文の 1つである`cond式`[^1]について説明します。
`cond式`は複数の条件をあつかう特殊形式[^2]で、Racket で複雑な条件分岐を実現するために使用できます。
本記事では、`cond式`の基礎的な使い方について説明します。

[^1]: cond 式: Racket 言語において`cond`で始まる式。複数の条件分岐に使用する
[^2]: 特殊形式: `if`、`cond`のように Racket の一般的な式と評価の方法が異なる式のこと。

## 技術用語

この記事では､以下の技術用語を扱います。

- `cond式` → Racket 言語の条件分岐において`cond`で始まる式。複数の条件分岐に使用する特殊形式
- `<述語>` → 条件分岐をする式において、条件を示す式。真(`#t`)、偽(`#f`)のいずれかを返す
- 特殊形式 → Racket の一般的な式と違い、評価の方法が異なる式
- else → `cond式`において、すべての述語に当てはまらなかった場合に評価される特殊記号
- `<else式>` → else 節で評価される式

## 制御構文

制御構文とは、プログラムの制御を変更するために使用される構文のことです。制御構文には、`if式`、`cond式`などがあります。

### cond式

`cond式`は Racket において、複数の条件分岐に使用される特殊形式です。
以下は、`cond式`の特徴があります。

- `cond`は、複数の`<述語>`[^3]のうち、評価が真となった場合の`<式>`の評価を返す
- '<述語>`に対応する`<式>`がない場合は、`<述語>`の結果を返す
- 評価が真となる`<述語>`がなかった場合は、`void`を返す
- `else`がある場合は、`void`のかわりに`else節`の`<式>`の評価を返す

`cond式`の構文は、以下のとおりです。

``` Racket : cond式
(cond
  [(<述語1>) (<式1>)]
  [(<述語2>) (<式2>)]
   .
   .
   .
  [(<述語n) (<式n>)]
  [else     (<else式>)]

```

以下のサンプルコードは、`cond`を使って曜日の短縮形から日本語の曜日を取得する方法を示しています。

``` Racket
#lang racket

(define (japanese-week day)
  (cond
    [(eqv? day "Mon") "月曜日"]
    [(eqv? day "Tue") "火曜日"]
    [(eqv? day "Wed") "水曜日"]
    [(eqv? day "Thu") "木曜日"]
    [(eqv? day "Fri") "金曜日"]
    [(eqv? day "Sat") "土曜日"]
    [(eqv? day "Sun") "日曜日"]

```

上記のコードでは、引数`day`を"Mon"、"Tue"`といった曜日の短縮形と比較しています。
day が短縮形と一致した場合は、対応する日本語の曜日を返しています。

[^3]: 述語: if,cond などの条件分岐において、条件を表す式。真(`#t`)、偽(`#f`)のいずれかの値を返す

### else

`else`は`cond式`の最後にかける特殊記号です。`<述語>`に当てはまる条件がなかった場合は、`else`ではじまる`else節`の`<式>`を評価します。
この記事では、`else`にた対応する式を`<else式>`と呼びます。

以下の、サンプルコードは曜日の短縮形から休日と平日を判断しています。

``` Racket: weekend.rkt

#lang racket

(define (weekend day)
  (cond
    [(eqv? day "Sat") "休日"]
    [(eqv? day "Sun") "休日"]
    [else "平日"]

```

上記のコードでは、引数`day'を短縮形"Sat","Sun"と比較しています。一致する場合は"休日"を返し、day がそれ以外の場合は、else 節を評価して"平日"を返します。

**注意点**

- else は`cond式`の最後にしか書けない。`else節`のあとに`述語`が続くとエラーとなる

## さいごに

Racket の cond 式を使用することで、複雑な条件分岐を実現できます。以上の例を参考にして、Racket のプログラムで cond 式を使用して条件分岐を実現する方法を学習してください。

## 参考資料

### 本

- [Racket Programming the Fun Way](https://www.amazon.co.jp/dp/1718500823)
- [How to Design Programs](https://www.amazon.co.jp/dp/0262534800/)
