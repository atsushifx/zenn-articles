---
title: "proxmox: proxmoxのセットアップ #1: Overview"
emoji: "💻"
type: "tech"
topics: ["miniPC", "proxmox", "pve", "diagram", ]
published: false
---

## はじめに

"Amazon"で`TRIGKEY Speed S5 Pro`という`ミニPC`を購入しました。

自宅サーバとして最適なこの PC に、`メモリ`, `SSD`, `HDD`を増設し、オープンソースの仮想化アプライアンス`promos`をインストールしました。
これにより、上記`ミニPC`に複数の OS を入れて試すことができます。
Enjoy!

## 1. `proxmox`の概要

### 1.1 `proxmox`とは

`proxmox`はオープンソースの仮想化アプライアンスです。
`Debian`をベースにした仮想化専用の`Linuxディストリビューション`で、`Web`から簡単にゲストマシンが構築できます。

## 2. 構成

### 2.1 ハードウェア構成

今回、購入した`Speed S5 Pro`は、`ゲストOS`が快適に動作するために、`SSD`とメモリを増設しました。

ハードウェアスペックは、下記の通りです:

| 種別 | モデル | スペック | 備考 |
| --- | --- | --- | --- |
| CPU | `AMD Ryzen 7 5800H` | `8コア` / `16スレッド` | |
| Graphics | `AMD Radeon Graphics` | `AMD Cezanne` | 内蔵グラフィックス |
| メモリ | `DDR4` | `64GB` | |
| ストレージ1 | `NVME SSD` | `2TB` | |
| ストレージ2 | `SATA SSD` | `2TB` | |
| USB外付け`HDD` | `USB 3` | `8TB` | |

### 2.2 ネットワーク構成

`Speed S5 Pro`は、自宅の`LAN`に繋ぎます。
自分の`PC`や`スマートフォン`は`無線LAN`で繋ぎますが、`NAS`などは`有線LAN`で繋ぎます。
図にすると下記のような感じです:

![家庭内LAN構成図](https://raw.githubusercontent.com/atsushifx/zenn-cli/e4ea3558b73f896fa71399e0791020f3c01a244b/images/atsushifxs-diagram/house-lan.svg)
*LAN構成図*

`IPアドレス`は、`1`～`100`を`DHCP`用に、`200`～をサーバなどの`固定IP`用に確保しています。
`250`～`254`は、ルータ用のアドレスです。

## 3. セットアップの概要

### 3.1 ディスクキャッシュの使用

ディスクキャッシュとして`NVME SSD`を利用し、システムの応答速度を向上させます。

ディスクキャッシュ用のツールとして`bcache`を使用します。
`bcache`は、通常の`/dev/sd*/`のようなデバイスの代わりに、`/dev/bcache#/`といったデバイスを作成します。
このデバイスを使用することで、`Linux`は通常と変わりない形で操作できます。

### 3.2 起動ディスクの作成

`USBメモリ`に`proxmoxインストーラ`の`ISOイメージ`を書き込み、起動ディスクを作成します。
起動ディスクの作成は、`rufus`を使用して、`マイクロSD`に直接`ISOイメージ`を書き込みます。

### 3.3 キーボードとマウス、およびモニター

インストール時には、キーボード、マウス、モニターを接続する必要があります。
キーボードとマウスは USB 接続の有線のもの、モニターは HDMI に対応したものを使います。
また、USB 接続端子のことを考えると、`USBハブ`があるといいでしょう。

## おわりに

この記事では、`ミニPC`を自宅サーバとして使用するにあたり、ハードウェアスペックや自宅`LAN`の環境などを説明しました。
それぞれの環境ごとにハードウェアや`自宅LAN`の環境が異なるため、自分の環境に適応するためには、設定を自分の環境に適宜読み替えてください。

それでは、Happy Hacking!
